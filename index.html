<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Executive Delivery & Online Transactions Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/en.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --info-color: #16a085;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --light-color: #f8f9fc;
            --dark-color: #2c3e50;
            --year2024-color: #e74c3c;
            --year2025-color: #3498db;
            --self-delivery-color: #16a085;
            --online-delivery-color: #9b59b6;
        }
        
        body {
            background-color: #f8f9fc;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
        }
        
        .sidebar {
            width: 250px;
            background-color: var(--primary-color);
            color: white;
            height: 100vh;
            position: fixed;
            padding-top: 20px;
            overflow-y: auto;
            z-index: 1000;
            transition: transform 0.3s;
        }
        
        .menu-item {
            padding: 15px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .menu-item:hover, .menu-item.active {
            background-color: #34495e;
        }
        
        .main-content {
            margin-left: 250px;
            padding: 20px;
            transition: margin-left 0.3s;
        }
        
        .section {
            display: none;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .section.active {
            display: block;
        }
        
        .dashboard-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 30px 0;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .metric-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s;
            height: 100%;
            overflow: hidden;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
        }
        
        .metric-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .chart-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            padding: 25px;
            margin-bottom: 30px;
            position: relative;
            height: 400px;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--dark-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .year-toggle {
            display: flex;
            background-color: #e9ecef;
            border-radius: 30px;
            padding: 4px;
            width: fit-content;
        }
        
        .year-toggle button {
            border: none;
            background-color: transparent;
            border-radius: 26px;
            padding: 8px 20px;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .year-toggle button.active {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .comparison-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        
        input:checked + .slider:before {
            transform: translateX(30px);
        }
        
        .data-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .table-responsive {
            border-radius: 10px;
            overflow: hidden;
        }
        
        .table th {
            background-color: #f1f5f9;
            border-top: none;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
        }
        
        .trend-up {
            color: var(--success-color);
        }
        
        .trend-down {
            color: var(--danger-color);
        }
        
        .insight-box {
            background: #f8f9fc;
            border-left: 4px solid var(--info-color);
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .badge-platform {
            padding: 8px 12px;
            border-radius: 20px;
            font-weight: 500;
            font-size: 0.85rem;
        }
        
        .performance-indicator {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        .excellent {
            background-color: #d1e7dd;
            color: #0f5132;
        }
        
        .good {
            background-color: #cff4fc;
            color: #055160;
        }
        
        .average {
            background-color: #fff3cd;
            color: #664d03;
        }
        
        .poor {
            background-color: #f8d7da;
            color: #842029;
        }
        
        .chart-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .chart-column {
            flex: 1;
            min-width: 300px;
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            border-radius: 15px;
        }
        
        .spinner-border {
            width: 3rem;
            height: 3rem;
        }
        
        .branch-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s;
            height: 100%;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .branch-card:hover {
            transform: translateY(-5px);
        }
        
        .branch-header {
            padding: 15px 20px;
            font-weight: 600;
            font-size: 1.1rem;
            color: white;
        }
        
        .branch-icon {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            font-size: 24px;
            margin-bottom: 15px;
        }
        
        .metric-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .metric-label {
            font-size: 0.9rem;
            color: #858796;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, var(--success-color) 0%, var(--info-color) 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .highlight-number {
            font-size: 3rem;
            font-weight: 700;
        }
        
        .highlight-label {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .outlet-grid, .chart-grid, .insights-grid, .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .form-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .notification {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--success-color);
            color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            z-index: 2000;
        }
        
        .notification.show {
            display: block;
        }
        
        .notification.error {
            background-color: var(--danger-color);
        }
        
        .notification.info {
            background-color: var(--info-color);
        }
        
        .data-log table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .data-log th, .data-log td {
            border: 1px solid #e0e0e0;
            padding: 10px;
            text-align: left;
        }
        
        .data-log th {
            background-color: #f4f6f9;
            font-weight: bold;
        }
        
        .year-btn {
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
            border: 1px solid #ddd;
            background: white;
        }
        
        .year-btn.active {
            background-color: #34495e;
            color: white;
        }
        
        .year-btn:hover {
            background-color: #ecf0f1;
        }
        
        .outlet-stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--dark-color);
        }
        
        .outlet-stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        .metric-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--dark-color);
        }
        
        .metric-label {
            font-size: 0.8rem;
            color: #7f8c8d;
        }
        
        .branch-analysis {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .branch-analysis h3 {
            margin-bottom: 15px;
            color: var(--dark-color);
        }
        
        .branch-metrics {
            margin-bottom: 20px;
        }
        
        .insight-card {
            border-left: 4px solid;
            padding-left: 15px;
        }
        
        .insight-card.positive {
            border-left-color: var(--success-color);
        }
        
        .insight-card.negative {
            border-left-color: var(--danger-color);
        }
        
        .insight-card.neutral {
            border-left-color: var(--warning-color);
        }
        
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .report-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .report-table th, .report-table td {
            border: 1px solid #e0e0e0;
            padding: 12px;
            text-align: left;
        }
        
        .report-table th {
            background-color: #f4f6f9;
            font-weight: bold;
        }
        
        .report-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .report-table .summary-row {
            background-color: #e8f4f8 !important;
            font-weight: bold;
        }
        
        .period-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .period-selector select {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        .branch-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .branch-selector select {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        .export-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .export-btn {
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .export-pdf {
            background-color: var(--danger-color);
            color: white;
        }
        
        .export-pdf:hover {
            background-color: #c0392b;
        }
        
        .export-excel {
            background-color: var(--success-color);
            color: white;
        }
        
        .export-excel:hover {
            background-color: #229954;
        }
        
        .export-csv {
            background-color: var(--info-color);
            color: white;
        }
        
        .export-csv:hover {
            background-color: #138d75;
        }
        
        .summary-card {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .summary-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .summary-stat {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }
        
        .summary-stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .summary-stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .summary-insights {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }
        
        .summary-insights h4 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .summary-insights ul {
            list-style: none;
            padding: 0;
        }
        
        .summary-insights li {
            padding: 5px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .summary-insights li::before {
            content: "•";
            color: var(--warning-color);
            font-size: 1.2rem;
        }
        
        .notes-panel {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .notes-panel h4 {
            margin-bottom: 15px;
            color: var(--dark-color);
        }
        
        .notes-textarea {
            width: 100%;
            min-height: 120px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
        }
        
        .notes-actions {
            margin-top: 10px;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .branch-contribution {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .contribution-table {
            width: 100%;
            margin-top: 15px;
        }
        
        .contribution-table th, .contribution-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .contribution-bar {
            height: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            margin-top: 5px;
            overflow: hidden;
        }
        
        .contribution-fill {
            height: 100%;
            background-color: var(--secondary-color);
            border-radius: 5px;
        }
        
        .date-range-picker {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .date-input {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .btn-action {
            padding: 6px 12px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        
        .btn-edit {
            background-color: var(--warning-color);
            color: white;
        }
        
        .btn-edit:hover {
            background-color: #d68910;
        }
        
        .btn-delete {
            background-color: var(--danger-color);
            color: white;
        }
        
        .btn-delete:hover {
            background-color: #c0392b;
        }
        
        .btn-save {
            background-color: var(--success-color);
            color: white;
        }
        
        .btn-save:hover {
            background-color: #229954;
        }
        
        .btn-cancel {
            background-color: #6c757d;
            color: white;
        }
        
        .btn-cancel:hover {
            background-color: #5a6268;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .close-modal {
            font-size: 1.5rem;
            cursor: pointer;
            color: #aaa;
        }
        
        .close-modal:hover {
            color: #000;
        }
        
        .kpi-card {
            background: linear-gradient(135deg, #f8f9fc 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .kpi-card:hover {
            transform: translateY(-5px);
        }
        
        .kpi-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .kpi-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .kpi-label {
            font-size: 0.9rem;
            color: #858796;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .kpi-change {
            font-size: 0.9rem;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .kpi-change.positive {
            color: var(--success-color);
        }
        
        .kpi-change.negative {
            color: var(--danger-color);
        }
        
        .notes-container {
            margin-top: 20px;
        }
        
        .note-item {
            background: #f8f9fc;
            border-left: 4px solid var(--info-color);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 0 8px 8px 0;
        }
        
        .note-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .note-date {
            font-size: 0.85rem;
            color: #858796;
        }
        
        .note-author {
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .note-content {
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .daily-chart-container {
            height: 400px;
        }
        
        .report-section {
            margin-bottom: 30px;
        }
        
        .report-section h3 {
            margin-bottom: 15px;
            color: var(--dark-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }
        
        .report-summary {
            background: #f8f9fc;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .report-summary h4 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .report-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .report-metric {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .report-metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .report-metric-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .insight-card {
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            overflow: hidden;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .insight-card-header {
            padding: 15px 20px;
            font-weight: 600;
            font-size: 1.1rem;
            color: white;
        }
        
        .insight-card-body {
            padding: 20px;
            flex-grow: 1;
        }
        
        .insight-card.positive .insight-card-header {
            background-color: var(--success-color);
        }
        
        .insight-card.negative .insight-card-header {
            background-color: var(--danger-color);
        }
        
        .insight-card.neutral .insight-card-header {
            background-color: var(--warning-color);
        }
        
        .insight-highlight {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .insight-description {
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .year-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .year-2024 {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--year2024-color);
        }
        
        .year-2025 {
            background-color: rgba(52, 152, 219, 0.2);
            color: var(--year2025-color);
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .sidebar.open {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
            }
            .mobile-menu-btn {
                display: block;
            }
            .chart-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <button class="mobile-menu-btn" onclick="toggleSidebar()">
        <i class="bi bi-list"></i>
    </button>

    <!-- Header -->
    <div class="dashboard-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="mb-0">Executive Delivery & Online Transactions Dashboard</h1>
                    <p class="mb-0 mt-2">Comprehensive Performance Analysis</p>
                </div>
                <div class="col-md-4 text-end">
                    <div class="btn-group" role="group">
                        <button class="btn btn-light" onclick="exportData('pdf')">
                            <i class="bi bi-file-pdf me-2"></i>PDF Report
                        </button>
                        <button class="btn btn-light" onclick="exportData('excel')">
                            <i class="bi bi-file-excel me-2"></i>Excel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="sidebar" id="sidebar">
        <h2 class="text-2xl font-bold text-center mb-6">Executive Dashboard</h2>
        <div class="menu-item active" data-section="executive-dashboard">
            <i class="bi bi-speedometer2"></i> Executive Overview
        </div>
        <div class="menu-item" data-section="monthly-performance">
            <i class="bi bi-calendar-month"></i> Monthly Performance
        </div>
        <div class="menu-item" data-section="comparisons-report">
            <i class="bi bi-graph-up"></i> Comparisons Report
        </div>
        <div class="menu-item" data-section="branch-analysis">
            <i class="bi bi-shop"></i> Branch Analysis
        </div>
        <div class="menu-item" data-section="channel-delivery-report">
            <i class="bi bi-truck"></i> Channel/Delivery Report
        </div>
        <div class="menu-item" data-section="daily-trends-report">
            <i class="bi bi-calendar-day"></i> Daily/Period Trends
        </div>
        <div class="menu-item" data-section="management-notes">
            <i class="bi bi-journal-text"></i> Management Notes
        </div>
        <div class="menu-item" data-section="data-management">
            <i class="bi bi-database"></i> Data Management
        </div>
    </div>

    <div class="main-content">
        <section id="executive-dashboard" class="section active">
            <!-- Filters Section -->
            <div class="form-container">
                <h2 class="section-title">Interactive Filters</h2>
                <div class="row">
                    <div class="col-md-3">
                        <label class="form-label">Year</label>
                        <select class="form-select" id="yearFilter">
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="both" selected>Both Years</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Branch</label>
                        <select class="form-select" id="branchFilter">
                            <option value="all" selected>All Branches</option>
                            <option value="Crispy Chicken-Hamdan St">Hamdan St</option>
                            <option value="Crispy Chicken Khaldia">Khaldia</option>
                            <option value="Crispy Chicken Shabiya 11">Shabiya 11</option>
                            <option value="Crispy Chicken Muroor">Muroor</option>
                            <option value="Crispy Chicken Al Electra">Al Electra</option>
                            <option value="Crispy Chicken Al Barsha">Al Barsha</option>
                            <option value="Crispy Chicken Al Satwa">Al Satwa</option>
                            <option value="Crispy Chicken Al Rigga">Al Rigga</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Delivery Type</label>
                        <select class="form-select" id="deliveryType">
                            <option value="all" selected>All</option>
                            <option value="self">Self-Delivery</option>
                            <option value="online">Third-Party</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Channel</label>
                        <select class="form-select" id="channelFilter">
                            <option value="all" selected>All Channels</option>
                            <option value="delivery">Delivery</option>
                            <option value="online">Online</option>
                        </select>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-3">
                        <label class="form-label">Report Period</label>
                        <select class="form-select" id="reportPeriod">
                            <option value="monthly" selected>Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Date Range</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="dateRange" placeholder="Select date range">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Comparison Mode</label>
                        <select class="form-select" id="comparisonMode">
                            <option value="single">Single Year</option>
                            <option value="yoy" selected>Year-on-Year (YoY)</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">MoM Comparison</label>
                        <select class="form-select" id="momComparison">
                            <option value="none" selected>None</option>
                            <option value="prev">Previous Month</option>
                            <option value="same">Same Month Last Year</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- KPIs Section -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="kpi-card">
                        <div class="kpi-icon text-primary">
                            <i class="bi bi-currency-dollar"></i>
                        </div>
                        <div class="kpi-value" id="totalSales">AED 5,665,689</div>
                        <div class="kpi-label">Total Sales</div>
                        <div class="kpi-change positive" id="salesGrowth">-33.7% YoY</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="kpi-card">
                        <div class="kpi-icon text-info">
                            <i class="bi bi-cart-check"></i>
                        </div>
                        <div class="kpi-value" id="totalOrders">72,144</div>
                        <div class="kpi-label">Total Orders</div>
                        <div class="kpi-change negative" id="ordersGrowth">-34.8% YoY</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="kpi-card">
                        <div class="kpi-icon text-warning">
                            <i class="bi bi-calculator"></i>
                        </div>
                        <div class="kpi-value" id="avgOrderValue">AED 78.55</div>
                        <div class="kpi-label">Average Order Value</div>
                        <div class="kpi-change positive" id="aovGrowth">+1.7% YoY</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="kpi-card">
                        <div class="kpi-icon text-success">
                            <i class="bi bi-graph-up-arrow"></i>
                        </div>
                        <div class="kpi-value" id="growthRate">-33.7%</div>
                        <div class="kpi-label">YoY Growth Rate</div>
                        <div class="kpi-change negative">Significant Decline</div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="chart-row">
                <div class="chart-column">
                    <div class="chart-container">
                        <h3>Sales Trends <span class="year-indicator" id="salesTrendYearIndicator">2024-2025</span></h3>
                        <canvas id="sales-trends-chart"></canvas>
                    </div>
                </div>
                <div class="chart-column">
                    <div class="chart-container">
                        <h3>Delivery vs Online Performance <span class="year-indicator" id="deliveryVsOnlineYearIndicator">2024-2025</span></h3>
                        <canvas id="delivery-vs-online-chart"></canvas>
                    </div>
                </div>
            </div>

            <div class="chart-row">
                <div class="chart-column">
                    <div class="chart-container">
                        <h3>Branch Contribution <span class="year-indicator" id="branchContributionYearIndicator">2025</span></h3>
                        <canvas id="branch-contribution-chart"></canvas>
                    </div>
                </div>
                <div class="chart-column">
                    <div class="chart-container">
                        <h3>Top and Bottom Performing Branches <span class="year-indicator" id="topBottomBranchesYearIndicator">2025</span></h3>
                        <canvas id="top-bottom-branches-chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Insights Section -->
            <div class="insights-grid">
                <div class="insight-card negative">
                    <div class="insight-card-header">
                        <i class="bi bi-graph-down me-2"></i>Sales Trend Analysis
                    </div>
                    <div class="insight-card-body">
                        <div class="insight-highlight">-33.7% Decline</div>
                        <div class="insight-description">
                            Overall sales have declined significantly from 2024 to 2025. Self-delivery accounts for 65% of total sales, while online delivery contributes 35%. Both delivery types show substantial year-over-year decreases.
                        </div>
                    </div>
                </div>
                
                <div class="insight-card neutral">
                    <div class="insight-card-header">
                        <i class="bi bi-shop me-2"></i>Branch Contribution Analysis
                    </div>
                    <div class="insight-card-body">
                        <div class="insight-highlight">Hamdan St: 32%</div>
                        <div class="insight-description">
                            Hamdan St maintains the largest market share at 32%, followed by Khaldia (18%) and Shabiya 11 (15%). All branches show significant sales declines compared to 2024.
                        </div>
                    </div>
                </div>
                
                <div class="insight-card positive">
                    <div class="insight-card-header">
                        <i class="bi bi-truck me-2"></i>Delivery Channel Performance
                    </div>
                    <div class="insight-card-body">
                        <div class="insight-highlight">Self-Delivery: 65%</div>
                        <div class="insight-description">
                            Self-delivery continues to outperform online delivery with 65% of total sales. Despite the overall decline, self-delivery maintains a stronger market position compared to online delivery.
                        </div>
                    </div>
                </div>
                
                <div class="insight-card negative">
                    <div class="insight-card-header">
                        <i class="bi bi-arrow-down-circle me-2"></i>Growth & Decline Analysis
                    </div>
                    <div class="insight-card-body">
                        <div class="insight-highlight">-34.8% Order Decline</div>
                        <div class="insight-description">
                            Online transactions declined by 34.8% compared to the same period last year. Self-delivery declined by 32.1%, showing a slightly better performance than online delivery.
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="monthly-performance" class="section">
            <h2><i class="bi bi-calendar-month"></i> Monthly Performance Report</h2>
            
            <div class="report-section">
                <h3>Delivery & Online Transactions Summary</h3>
                <div class="report-summary">
                    <h4>Overview</h4>
                    <p>This report provides a comprehensive analysis of delivery and online transactions for the selected period.</p>
                    
                    <div class="report-metrics">
                        <div class="report-metric">
                            <div class="report-metric-value" id="monthly-total-sales">AED 5,665,689</div>
                            <div class="report-metric-label">Total Sales</div>
                        </div>
                        <div class="report-metric">
                            <div class="report-metric-value" id="monthly-total-orders">72,144</div>
                            <div class="report-metric-label">Total Orders</div>
                        </div>
                        <div class="report-metric">
                            <div class="report-metric-value" id="monthly-avg-order-value">AED 78.55</div>
                            <div class="report-metric-label">Average Order Value</div>
                        </div>
                        <div class="report-metric">
                            <div class="report-metric-value" id="monthly-growth-rate">-33.7%</div>
                            <div class="report-metric-label">YoY Growth</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3>Monthly Sales by Delivery Type <span class="year-indicator" id="monthlyDeliveryYearIndicator">2025</span></h3>
                    <canvas id="monthly-delivery-chart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>Monthly Sales by Channel <span class="year-indicator" id="monthlyChannelYearIndicator">2025</span></h3>
                    <canvas id="monthly-channel-chart"></canvas>
                </div>
                
                <div class="data-section">
                    <h3>Detailed Monthly Performance</h3>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Month</th>
                                    <th>2024 Sales</th>
                                    <th>2024 Orders</th>
                                    <th>2025 Sales</th>
                                    <th>2025 Orders</th>
                                    <th>Total Sales</th>
                                    <th>Total Orders</th>
                                    <th>Avg Order Value</th>
                                    <th>YoY Growth</th>
                                </tr>
                            </thead>
                            <tbody id="monthly-performance-tbody">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <section id="comparisons-report" class="section">
            <h2><i class="bi bi-graph-up"></i> Comparisons Report</h2>
            
            <div class="report-section">
                <h3>Month-to-Month Comparison</h3>
                <div class="chart-container">
                    <h3>Current vs Previous Month <span class="year-indicator" id="monthComparisonYearIndicator">2025</span></h3>
                    <canvas id="month-comparison-chart"></canvas>
                </div>
                
                <div class="data-section">
                    <h3>Month-to-Month Comparison Table</h3>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Month</th>
                                    <th>2024 Sales</th>
                                    <th>2024 Orders</th>
                                    <th>2025 Sales</th>
                                    <th>2025 Orders</th>
                                    <th>Avg Order Value</th>
                                    <th>vs Previous Month</th>
                                    <th>vs Same Month Last Year</th>
                                </tr>
                            </thead>
                            <tbody id="monthly-comparison-tbody">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="report-section">
                <h3>Year-on-Year Comparison</h3>
                <div class="chart-container">
                    <h3>Same Month vs Last Year <span class="year-indicator" id="yearOverYearYearIndicator">2024-2025</span></h3>
                    <canvas id="year-over-year-chart"></canvas>
                </div>
                
                <div class="data-section">
                    <h3>Year-on-Year Comparison Table</h3>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Month</th>
                                    <th>2024 Sales</th>
                                    <th>2024 Orders</th>
                                    <th>2025 Sales</th>
                                    <th>2025 Orders</th>
                                    <th>Sales Growth</th>
                                    <th>Orders Growth</th>
                                </tr>
                            </thead>
                            <tbody id="year-over-year-tbody">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <section id="branch-analysis" class="section">
            <h2><i class="bi bi-shop"></i> Branch Analysis Report</h2>
            
            <div class="report-section">
                <h3>Branch Performance Summary</h3>
                <div class="chart-container">
                    <h3>Branch Sales Comparison <span class="year-indicator" id="branchSalesYearIndicator">2025</span></h3>
                    <canvas id="branch-sales-chart"></canvas>
                </div>
                
                <div class="data-section">
                    <h3>Branch Performance Details</h3>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Branch</th>
                                    <th>2024 Sales</th>
                                    <th>2024 Orders</th>
                                    <th>2025 Sales</th>
                                    <th>2025 Orders</th>
                                    <th>Total Sales</th>
                                    <th>Contribution %</th>
                                    <th>Performance</th>
                                </tr>
                            </thead>
                            <tbody id="branch-performance-tbody">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="report-section">
                <h3>Branch Contribution Analysis</h3>
                <div class="chart-container">
                    <h3>Branch Distribution <span class="year-indicator" id="branchContributionReportYearIndicator">2025</span></h3>
                    <canvas id="branch-contribution-report-chart"></canvas>
                </div>
                
                <div class="data-section">
                    <h3>Branch Contribution Details</h3>
                    <div class="branch-contribution">
                        <div class="contribution-table">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Branch</th>
                                        <th>2024 Sales</th>
                                        <th>2025 Sales</th>
                                        <th>Percentage</th>
                                        <th>Contribution</th>
                                    </tr>
                                </thead>
                                <tbody id="branch-contribution-tbody">
                                    <!-- Data will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="channel-delivery-report" class="section">
            <h2><i class="bi bi-truck"></i> Channel/Delivery Report</h2>
            
            <div class="report-section">
                <h3>Self-Delivery vs Third-Party Performance</h3>
                <div class="chart-container">
                    <h3>Self-Delivery Performance <span class="year-indicator" id="selfDeliveryYearIndicator">2025</span></h3>
                    <canvas id="self-delivery-report-chart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>Third-Party Performance <span class="year-indicator" id="thirdPartyYearIndicator">2025</span></h3>
                    <canvas id="third-party-report-chart"></canvas>
                </div>
                
                <div class="data-section">
                    <h3>Delivery Type Comparison</h3>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Delivery Type</th>
                                    <th>2024 Sales</th>
                                    <th>2024 Orders</th>
                                    <th>2025 Sales</th>
                                    <th>2025 Orders</th>
                                    <th>YoY Sales Growth</th>
                                    <th>YoY Order Growth</th>
                                </tr>
                            </thead>
                            <tbody id="delivery-type-tbody">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="report-section">
                <h3>Delivery vs Online Performance</h3>
                <div class="chart-container">
                    <h3>Channel Performance Comparison <span class="year-indicator" id="channelComparisonYearIndicator">2025</span></h3>
                    <canvas id="channel-comparison-report-chart"></canvas>
                </div>
                
                <div class="data-section">
                    <h3>Channel Performance Details</h3>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Channel</th>
                                    <th>2024 Sales</th>
                                    <th>2024 Orders</th>
                                    <th>2025 Sales</th>
                                    <th>2025 Orders</th>
                                    <th>Contribution %</th>
                                    <th>Growth Rate</th>
                                </tr>
                            </thead>
                            <tbody id="channel-performance-tbody">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <section id="daily-trends-report" class="section">
            <h2><i class="bi bi-calendar-day"></i> Daily/Period Trends Report</h2>
            
            <div class="form-container">
                <h3>Date Range Selection</h3>
                <div class="date-range-picker">
                    <div>
                        <label for="daily-start-date" class="block text-sm font-medium text-gray-700">Start Date</label>
                        <input type="text" id="daily-start-date" class="date-input" placeholder="Select start date">
                    </div>
                    <div>
                        <label for="daily-end-date" class="block text-sm font-medium text-gray-700">End Date</label>
                        <input type="text" id="daily-end-date" class="date-input" placeholder="Select end date">
                    </div>
                    <div>
                        <label for="daily-branch" class="block text-sm font-medium text-gray-700">Branch</label>
                        <select id="daily-branch" class="form-select">
                            <option value="all">All Branches</option>
                            <option value="Crispy Chicken-Hamdan St">Hamdan St</option>
                            <option value="Crispy Chicken Khaldia">Khaldia</option>
                            <option value="Crispy Chicken Shabiya 11">Shabiya 11</option>
                            <option value="Crispy Chicken Muroor">Muroor</option>
                            <option value="Crispy Chicken Al Electra">Al Electra</option>
                            <option value="Crispy Chicken Al Barsha">Al Barsha</option>
                            <option value="Crispy Chicken Al Satwa">Al Satwa</option>
                            <option value="Crispy Chicken Al Rigga">Al Rigga</option>
                        </select>
                    </div>
                    <div class="d-flex align-items-end">
                        <button onclick="generateDailyReport()" class="btn btn-primary">
                            <i class="bi bi-arrow-clockwise me-2"></i>Generate Report
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="chart-container daily-chart-container">
                <h3>Daily Transactions and Sales</h3>
                <canvas id="daily-chart"></canvas>
            </div>
            
            <div class="chart-row">
                <div class="chart-column">
                    <div class="chart-container">
                        <h3>Weekday vs Weekend Performance</h3>
                        <canvas id="weekday-weekend-chart"></canvas>
                    </div>
                </div>
                <div class="chart-column">
                    <div class="chart-container">
                        <h3>Peak Hours Analysis</h3>
                        <canvas id="peak-hours-chart"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="data-section">
                <h3>Daily Analysis Summary</h3>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Branch</th>
                                <th>Delivery Sales</th>
                                <th>Online Sales</th>
                                <th>Total Sales</th>
                                <th>Delivery Orders</th>
                                <th>Online Orders</th>
                                <th>Total Orders</th>
                                <th>Avg Order Value</th>
                            </tr>
                        </thead>
                        <tbody id="daily-analysis-tbody">
                            <!-- Data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="management-notes" class="section">
            <h2><i class="bi bi-journal-text"></i> Management Notes Report</h2>
            
            <div class="notes-panel">
                <h4>Add Management Note</h4>
                <div class="mb-3">
                    <label for="note-branch" class="form-label">Branch</label>
                    <select id="note-branch" class="form-select">
                        <option value="all">All Branches</option>
                        <option value="Crispy Chicken-Hamdan St">Hamdan St</option>
                        <option value="Crispy Chicken Khaldia">Khaldia</option>
                        <option value="Crispy Chicken Shabiya 11">Shabiya 11</option>
                        <option value="Crispy Chicken Muroor">Muroor</option>
                        <option value="Crispy Chicken Al Electra">Al Electra</option>
                        <option value="Crispy Chicken Al Barsha">Al Barsha</option>
                        <option value="Crispy Chicken Al Satwa">Al Satwa</option>
                        <option value="Crispy Chicken Al Rigga">Al Rigga</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="note-content" class="form-label">Note</label>
                    <textarea id="note-content" class="notes-textarea" rows="4" placeholder="Enter operational notes..."></textarea>
                </div>
                <div class="notes-actions">
                    <button class="btn btn-primary" onclick="addNote()">
                        <i class="bi bi-plus-circle me-2"></i>Add Note
                    </button>
                </div>
            </div>
            
            <div class="notes-container" id="notes-container">
                <h4>Recent Notes</h4>
                <div id="notes-list">
                    <!-- Notes will be populated here -->
                </div>
            </div>
        </section>

        <section id="data-management" class="section">
            <h2><i class="bi bi-database"></i> Data Management</h2>
            
            <div class="form-container">
                <h3>Add/Edit Monthly Data</h3>
                <form id="data-entry-form">
                    <div class="row">
                        <div class="col-md-6">
                            <label for="branch" class="form-label">Branch</label>
                            <select id="branch" class="form-select" required>
                                <option value="">Select Branch</option>
                                <option value="Hamdan">Hamdan St</option>
                                <option value="Khaldia">Khaldia</option>
                                <option value="Shabiya_11">Shabiya 11</option>
                                <option value="Muroor">Muroor</option>
                                <option value="Al_Electra">Al Electra</option>
                                <option value="Al_Barsha">Al Barsha</option>
                                <option value="Al_Satwa">Al Satwa</option>
                                <option value="Al_Rigga">Al Rigga</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="month" class="form-label">Month</label>
                            <select id="month" class="form-select" required>
                                <option value="">Select Month</option>
                                <option value="0">January</option>
                                <option value="1">February</option>
                                <option value="2">March</option>
                                <option value="3">April</option>
                                <option value="4">May</option>
                                <option value="5">June</option>
                                <option value="6">July</option>
                                <option value="7">August</option>
                                <option value="8">September</option>
                                <option value="9">October</option>
                                <option value="10">November</option>
                                <option value="11">December</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="total-sales" class="form-label">Total Sales (AED)</label>
                            <input type="number" id="total-sales" class="form-control" step="0.01" required>
                        </div>
                        <div class="col-md-6">
                            <label for="transactions" class="form-label">Transactions</label>
                            <input type="number" id="transactions" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                            <label for="delivery-sales" class="form-label">Delivery Sales (AED)</label>
                            <input type="number" id="delivery-sales" class="form-control" step="0.01" required>
                        </div>
                        <div class="col-md-6">
                            <label for="delivery-orders" class="form-label">Delivery Orders</label>
                            <input type="number" id="delivery-orders" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                            <label for="online-sales" class="form-label">Online Sales (AED)</label>
                            <input type="number" id="online-sales" class="form-control" step="0.01" required>
                        </div>
                        <div class="col-md-6">
                            <label for="online-orders" class="form-label">Online Orders</label>
                            <input type="number" id="online-orders" class="form-control" required>
                        </div>
                    </div>
                    <div class="d-flex gap-2 mt-4">
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-save me-2"></i>Submit Data
                        </button>
                        <button type="button" onclick="resetForm()" class="btn btn-secondary">
                            <i class="bi bi-arrow-counterclockwise me-2"></i>Reset Form
                        </button>
                    </div>
                </form>
            </div>
            
            <div class="form-container">
                <h3>Data Management Table</h3>
                <div class="overflow-x-auto">
                    <table class="table table-striped" id="data-management-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Date</th>
                                <th>Branch</th>
                                <th>Month</th>
                                <th>Total Sales</th>
                                <th>Transactions</th>
                                <th>Delivery Sales</th>
                                <th>Delivery Orders</th>
                                <th>Online Sales</th>
                                <th>Online Orders</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="data-management-tbody">
                            <!-- Data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </div>

    <div id="notification" class="notification">
        <span id="notification-message"></span>
    </div>

    <script>
        // Chart.js global configuration
        Chart.defaults.font.family = "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif";
        Chart.defaults.color = '#2c3e50';

        // Sales data structure with actual delivery and online transaction data
        const salesData = {
            2024: {
                "Crispy Chicken-Hamdan St": { 
                    total: 1964910, 
                    self: { 
                        sales: 1583067, 
                        orders: 34662,
                        monthly: [130332, 119033, 112730, 134005, 142948, 153855, 140646, 146010, 124891, 122430, 122157, 134030],
                        monthlyOrders: [2797, 2797, 2474, 2815, 3066, 3261, 3236, 3267, 2658, 2716, 2835, 2740]
                    },
                    online: { 
                        sales: 381843, 
                        orders: 7992,
                        monthly: [39204, 33373, 29535, 33433, 35454, 40787, 39832, 32362, 27887, 25924, 20000, 24052],
                        monthlyOrders: [771, 661, 615, 674, 733, 825, 876, 756, 547, 590, 450, 494]
                    },
                    platforms: { Noon: 130332, Talabat: 55628, Careem: 38266, Smile: 5483, Deliveroo: 411426 }
                },
                "Crispy Chicken Khaldia": { 
                    total: 1036340, 
                    self: { 
                        sales: 818635, 
                        orders: 15933,
                        monthly: [73203, 64910, 56006, 63867, 71236, 78402, 72570, 70910, 61308, 60725, 60461, 85037],
                        monthlyOrders: [1444, 1270, 1114, 1268, 1423, 1467, 1438, 1505, 1264, 1298, 1217, 1225]
                    },
                    online: { 
                        sales: 217705, 
                        orders: 4290,
                        monthly: [21135, 21217, 16169, 20903, 19685, 21759, 22254, 18936, 14826, 16403, 11694, 12724],
                        monthlyOrders: [412, 417, 321, 390, 366, 399, 447, 388, 281, 371, 253, 245]
                    },
                    platforms: { Noon: 73203, Talabat: 67034, Careem: 25668, Smile: 8602, Deliveroo: 313138 }
                },
                "Crispy Chicken Shabiya 11": { 
                    total: 814422, 
                    self: { 
                        sales: 693784, 
                        orders: 15458,
                        monthly: [53600, 56902, 50445, 63642, 62211, 64920, 60095, 58704, 50504, 56993, 59511, 56257],
                        monthlyOrders: [1184, 1260, 1167, 1434, 1380, 1396, 1366, 1388, 1135, 1324, 1272, 1152]
                    },
                    online: { 
                        sales: 120638, 
                        orders: 2576,
                        monthly: [11054, 11743, 8011, 10015, 11933, 9793, 9793, 11299, 8747, 10253, 10046, 7951],
                        monthlyOrders: [244, 222, 179, 204, 238, 223, 223, 237, 179, 257, 219, 151]
                    },
                    platforms: { Noon: 53600, Talabat: 79487, Careem: 34104, Smile: 4264, Deliveroo: 312863 }
                },
                "Crispy Chicken Muroor": { 
                    total: 831231, 
                    self: { 
                        sales: 729992, 
                        orders: 14997,
                        monthly: [56696, 54156, 45652, 59978, 61958, 71109, 63143, 64842, 61113, 65561, 62004, 63780],
                        monthlyOrders: [1140, 1078, 899, 1209, 1294, 1341, 1360, 1386, 1295, 1384, 1380, 1231]
                    },
                    online: { 
                        sales: 101239, 
                        orders: 1861,
                        monthly: [8231, 11050, 7874, 8167, 9704, 10966, 9358, 8392, 7504, 5777, 6152, 8064],
                        monthlyOrders: [154, 199, 143, 140, 174, 191, 176, 157, 146, 146, 116, 119]
                    },
                    platforms: { Noon: 56696, Talabat: 59499, Careem: 32060, Smile: 3548, Deliveroo: 270757 }
                },
                "Crispy Chicken Al Electra": { 
                    total: 0, 
                    self: { sales: 0, orders: 0, monthly: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], monthlyOrders: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                    online: { sales: 0, orders: 0, monthly: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], monthlyOrders: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                    platforms: { Noon: 0, Talabat: 0, Careem: 0, Smile: 0, Deliveroo: 0 }
                },
                "Crispy Chicken Al Barsha": { 
                    total: 719456, 
                    self: { 
                        sales: 547814, 
                        orders: 17021,
                        monthly: [30120, 33556, 30722, 40737, 50460, 48778, 56252, 54008, 54921, 55783, 44274, 48203],
                        monthlyOrders: [802, 928, 928, 1173, 1487, 1488, 1740, 1813, 1749, 1894, 1595, 1424]
                    },
                    online: { 
                        sales: 171642, 
                        orders: 3069,
                        monthly: [19348, 16597, 14043, 16921, 17351, 14681, 14681, 13840, 12385, 10663, 12048, 9084],
                        monthlyOrders: [365, 304, 243, 290, 299, 276, 276, 250, 203, 178, 214, 171]
                    },
                    platforms: { Noon: 40737, Talabat: 69636, Careem: 49245, Smile: 35818, Deliveroo: 330661 }
                },
                "Crispy Chicken Al Satwa": { 
                    total: 287330, 
                    self: { 
                        sales: 223638, 
                        orders: 6162,
                        monthly: [0, 0, 0, 0, 0, 0, 22337, 26665, 27068, 27671, 34732, 27068],
                        monthlyOrders: [0, 0, 0, 0, 0, 0, 795, 965, 799, 831, 765, 768]
                    },
                    online: { 
                        sales: 63692, 
                        orders: 1530,
                        monthly: [0, 0, 0, 0, 0, 0, 569, 6303, 8026, 9685, 11818, 8026],
                        monthlyOrders: [0, 0, 0, 0, 0, 0, 234, 299, 177, 225, 216, 216]
                    },
                    platforms: { Noon: 0, Talabat: 0, Careem: 0, Smile: 0, Deliveroo: 0 }
                },
                "Crispy Chicken Al Rigga": { 
                    total: 0, 
                    self: { sales: 0, orders: 0, monthly: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], monthlyOrders: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                    online: { sales: 0, orders: 0, monthly: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], monthlyOrders: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                    platforms: { Noon: 0, Talabat: 0, Careem: 0, Smile: 0, Deliveroo: 0 }
                }
            },
            2025: {
                "Crispy Chicken-Hamdan St": { 
                    total: 3390577, 
                    self: { 
                        sales: 967500, 
                        orders: 21439,
                        monthly: [119300, 111546, 87783, 106625, 117066, 106229, 109205, 103184, 106562, 0, 0, 0],
                        monthlyOrders: [2757, 2460, 1877, 2363, 2515, 2318, 2557, 2247, 2345, 0, 0, 0]
                    },
                    online: { 
                        sales: 308177, 
                        orders: 6828,
                        monthly: [25546, 28689, 23967, 35261, 39090, 38061, 41582, 34835, 41146, 0, 0, 0],
                        monthlyOrders: [569, 644, 493, 750, 905, 800, 1007, 771, 889, 0, 0, 0]
                    },
                    platforms: { Noon: 119300, Talabat: 55628, Careem: 38266, Smile: 5483, Deliveroo: 414426 }
                },
                "Crispy Chicken Khaldia": { 
                    total: 631847, 
                    self: { 
                        sales: 483380, 
                        orders: 9776,
                        monthly: [60360, 51718, 44621, 54785, 54610, 56860, 51618, 51039, 57769, 0, 0, 0],
                        monthlyOrders: [1241, 1054, 891, 1156, 1083, 1078, 1097, 1032, 1144, 0, 0, 0]
                    },
                    online: { 
                        sales: 148467, 
                        orders: 3030,
                        monthly: [13749, 14662, 12644, 16370, 20318, 19102, 17766, 17361, 16495, 0, 0, 0],
                        monthlyOrders: [292, 305, 198, 312, 439, 377, 426, 365, 316, 0, 0, 0]
                    },
                    platforms: { Noon: 60360, Talabat: 67034, Careem: 25668, Smile: 8602, Deliveroo: 313138 }
                },
                "Crispy Chicken Shabiya 11": { 
                    total: 571135, 
                    self: { 
                        sales: 484237, 
                        orders: 10398,
                        monthly: [52778, 51105, 40273, 56981, 56703, 54611, 55160, 55336, 61290, 0, 0, 0],
                        monthlyOrders: [1201, 1136, 906, 1246, 1187, 1114, 1177, 1162, 1269, 0, 0, 0]
                    },
                    online: { 
                        sales: 86898, 
                        orders: 1917,
                        monthly: [7398, 6340, 3282, 12005, 13045, 15350, 16910, 12568, 0, 0, 0, 0],
                        monthlyOrders: [177, 143, 74, 245, 308, 306, 404, 260, 0, 0, 0, 0]
                    },
                    platforms: { Noon: 52778, Talabat: 79487, Careem: 34104, Smile: 4264, Deliveroo: 312863 }
                },
                "Crispy Chicken Muroor": { 
                    total: 523717, 
                    self: { 
                        sales: 471023, 
                        orders: 9651,
                        monthly: [59749, 58438, 41808, 56795, 54302, 56046, 53001, 44361, 46523, 0, 0, 0],
                        monthlyOrders: [1255, 1199, 817, 1211, 1094, 1076, 1114, 912, 973, 0, 0, 0]
                    },
                    online: { 
                        sales: 52694, 
                        orders: 1034,
                        monthly: [3352, 3939, 3831, 6103, 6438, 6600, 6127, 5884, 10420, 0, 0, 0],
                        monthlyOrders: [72, 74, 67, 113, 131, 120, 125, 116, 216, 0, 0, 0]
                    },
                    platforms: { Noon: 59749, Talabat: 59499, Careem: 32060, Smile: 3548, Deliveroo: 270757 }
                },
                "Crispy Chicken Al Electra": { 
                    total: 6668, 
                    self: { sales: 0, orders: 0, monthly: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], monthlyOrders: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                    online: { 
                        sales: 6668, 
                        orders: 119,
                        monthly: [0, 0, 0, 0, 0, 0, 0, 0, 6668, 0, 0, 0],
                        monthlyOrders: [0, 0, 0, 0, 0, 0, 0, 0, 119, 0, 0, 0]
                    },
                    platforms: { Noon: 0, Talabat: 0, Careem: 0, Smile: 0, Deliveroo: 0 }
                },
                "Crispy Chicken Al Barsha": { 
                    total: 499684, 
                    self: { 
                        sales: 426656, 
                        orders: 11055,
                        monthly: [55752, 51699, 42075, 61422, 36988, 41436, 44627, 49296, 43361, 0, 0, 0],
                        monthlyOrders: [1726, 1527, 1427, 1816, 881, 891, 1007, 901, 879, 0, 0, 0]
                    },
                    online: { 
                        sales: 73028, 
                        orders: 1449,
                        monthly: [8325, 8977, 4816, 9647, 9039, 7877, 8453, 7404, 8490, 0, 0, 0],
                        monthlyOrders: [156, 178, 98, 181, 176, 161, 173, 159, 167, 0, 0, 0]
                    },
                    platforms: { Noon: 55752, Talabat: 69636, Careem: 49245, Smile: 35818, Deliveroo: 330661 }
                },
                "Crispy Chicken Al Satwa": { 
                    total: 324462, 
                    self: { 
                        sales: 214149, 
                        orders: 5547,
                        monthly: [26849, 24349, 21934, 29154, 20631, 21005, 24685, 22476, 23066, 0, 0, 0],
                        monthlyOrders: [818, 719, 645, 881, 506, 463, 528, 492, 495, 0, 0, 0]
                    },
                    online: { 
                        sales: 110313, 
                        orders: 2805,
                        monthly: [7572, 9979, 5832, 11509, 13388, 13815, 18083, 14903, 15232, 0, 0, 0],
                        monthlyOrders: [210, 240, 134, 283, 348, 343, 484, 387, 376, 0, 0, 0]
                    },
                    platforms: { Noon: 26849, Talabat: 71303, Careem: 25926, Smile: 20813, Deliveroo: 252008 }
                },
                "Crispy Chicken Al Rigga": { 
                    total: 1993, 
                    self: { 
                        sales: 1993, 
                        orders: 45,
                        monthly: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                        monthlyOrders: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                    },
                    online: { 
                        sales: 0, 
                        orders: 0,
                        monthly: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                        monthlyOrders: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                    },
                    platforms: { Noon: 0, Talabat: 0, Careem: 0, Smile: 45, Deliveroo: 0 }
                }
            }
        };

        // Operational notes data
        let operationalNotes = [];
        
        // Chart instances
        let salesTrendChart = null;
        let deliveryVsOnlineChart = null;
        let branchContributionChart = null;
        let topBottomBranchesChart = null;
        let monthlyDeliveryChart = null;
        let monthlyChannelChart = null;
        let monthComparisonChart = null;
        let yearOverYearChart = null;
        let branchSalesChart = null;
        let branchContributionReportChart = null;
        let selfDeliveryReportChart = null;
        let thirdPartyReportChart = null;
        let channelComparisonReportChart = null;
        let dailyChart = null;
        let weekdayWeekendChart = null;
        let peakHoursChart = null;

        // Initialize dashboard
        let currentYear = 'both';
        let comparisonMode = 'yoy';
        let currentBranch = 'all';
        let deliveryType = 'all';
        let reportPeriod = 'monthly';
        let currentChannel = 'all';

        document.addEventListener('DOMContentLoaded', function() {
            initializeDatePickers();
            initializeCharts();
            updateDashboard();
            setupFilterListeners();
            
            // Initialize notes from localStorage
            const savedNotes = localStorage.getItem('operationalNotes');
            if (savedNotes) {
                operationalNotes = JSON.parse(savedNotes);
                displayNotes();
            }
        });

        // Setup filter change listeners
        function setupFilterListeners() {
            // Year filter
            document.getElementById('yearFilter').addEventListener('change', function() {
                currentYear = this.value;
                updateDashboard();
                updateYearIndicators();
            });
            
            // Branch filter
            document.getElementById('branchFilter').addEventListener('change', function() {
                currentBranch = this.value;
                updateDashboard();
            });
            
            // Delivery type filter
            document.getElementById('deliveryType').addEventListener('change', function() {
                deliveryType = this.value;
                updateDashboard();
            });
            
            // Channel filter
            document.getElementById('channelFilter').addEventListener('change', function() {
                currentChannel = this.value;
                updateDashboard();
            });
            
            // Report period filter
            document.getElementById('reportPeriod').addEventListener('change', function() {
                reportPeriod = this.value;
                updateDashboard();
            });
            
            // Comparison mode filter
            document.getElementById('comparisonMode').addEventListener('change', function() {
                comparisonMode = this.value;
                updateDashboard();
            });
            
            // Month-on-month comparison filter
            document.getElementById('momComparison').addEventListener('change', function() {
                updateDashboard();
            });
            
            // Date range filter
            document.getElementById('dateRange').addEventListener('change', function() {
                updateDashboard();
            });
        }

        // Update year indicators
        function updateYearIndicators() {
            const indicators = {
                'salesTrendYearIndicator': currentYear === 'both' ? '2024-2025' : currentYear,
                'deliveryVsOnlineYearIndicator': currentYear === 'both' ? '2024-2025' : currentYear,
                'branchContributionYearIndicator': currentYear === 'both' ? '2025' : currentYear,
                'topBottomBranchesYearIndicator': currentYear === 'both' ? '2025' : currentYear,
                'monthlyDeliveryYearIndicator': currentYear === 'both' ? '2025' : currentYear,
                'monthlyChannelYearIndicator': currentYear === 'both' ? '2025' : currentYear,
                'monthComparisonYearIndicator': currentYear === 'both' ? '2025' : currentYear,
                'yearOverYearYearIndicator': currentYear === 'both' ? '2024-2025' : currentYear,
                'branchSalesYearIndicator': currentYear === 'both' ? '2025' : currentYear,
                'branchContributionReportYearIndicator': currentYear === 'both' ? '2025' : currentYear,
                'selfDeliveryYearIndicator': currentYear === 'both' ? '2025' : currentYear,
                'thirdPartyYearIndicator': currentYear === 'both' ? '2025' : currentYear,
                'channelComparisonYearIndicator': currentYear === 'both' ? '2025' : currentYear
            };
            
            Object.entries(indicators).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                    element.className = 'year-indicator ' + (value.includes('2024') ? 'year-2024' : 'year-2025');
                }
            });
        }

        // Initialize date pickers
        function initializeDatePickers() {
            // Initialize date range picker
            flatpickr("#dateRange", {
                mode: "range",
                dateFormat: "Y-m-d",
                locale: "en"
            });
            
            flatpickr("#daily-start-date", {
                dateFormat: "Y-m-d",
                maxDate: "today",
                locale: "en"
            });
            
            flatpickr("#daily-end-date", {
                dateFormat: "Y-m-d",
                maxDate: "today",
                locale: "en"
            });
        }

        // Mobile sidebar toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Navigation functionality
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.menu-item').forEach(menu => menu.classList.remove('active'));
                this.classList.add('active');
                
                const targetSection = this.dataset.section;
                showSection(targetSection);
                
                // Close mobile sidebar
                if (window.innerWidth <= 768) {
                    document.getElementById('sidebar').classList.remove('open');
                }
            });
        });

        // Show section function
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            
            // Initialize charts when section is shown
            setTimeout(() => {
                if (sectionId === 'executive-dashboard') {
                    initializeExecutiveCharts();
                } else if (sectionId === 'monthly-performance') {
                    initializeMonthlyPerformanceCharts();
                } else if (sectionId === 'comparisons-report') {
                    initializeComparisonsCharts();
                } else if (sectionId === 'branch-analysis') {
                    initializeBranchAnalysisCharts();
                } else if (sectionId === 'channel-delivery-report') {
                    initializeChannelDeliveryCharts();
                } else if (sectionId === 'daily-trends-report') {
                    initializeDailyTrendsCharts();
                }
            }, 100);
        }

        // Initialize all charts
        function initializeCharts() {
            initializeExecutiveCharts();
        }

        // Initialize executive dashboard charts
        function initializeExecutiveCharts() {
            // Destroy existing charts if they exist
            if (salesTrendChart) salesTrendChart.destroy();
            if (deliveryVsOnlineChart) deliveryVsOnlineChart.destroy();
            if (branchContributionChart) branchContributionChart.destroy();
            if (topBottomBranchesChart) topBottomBranchesChart.destroy();
            
            // Sales Trend Chart
            const salesTrendCtx = document.getElementById('sales-trends-chart');
            if (salesTrendCtx) {
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                
                // Prepare data for the chart
                const datasets = [];
                
                if (currentYear === 'both' || currentYear === 2024) {
                    datasets.push({
                        label: '2024 Self-Delivery',
                        data: months.map((_, i) => {
                            let total = 0;
                            Object.keys(salesData[2024]).forEach(branch => {
                                if (currentBranch === 'all' || branch === currentBranch) {
                                    total += salesData[2024][branch].self.monthly[i] || 0;
                                }
                            });
                            return total;
                        }),
                        borderColor: 'rgba(231, 76, 60, 1)',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        tension: 0.4
                    });
                    
                    datasets.push({
                        label: '2024 Online',
                        data: months.map((_, i) => {
                            let total = 0;
                            Object.keys(salesData[2024]).forEach(branch => {
                                if (currentBranch === 'all' || branch === currentBranch) {
                                    total += salesData[2024][branch].online.monthly[i] || 0;
                                }
                            });
                            return total;
                        }),
                        borderColor: 'rgba(52, 152, 219, 1)',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        tension: 0.4
                    });
                }
                
                if (currentYear === 'both' || currentYear === 2025) {
                    datasets.push({
                        label: '2025 Self-Delivery',
                        data: months.map((_, i) => {
                            let total = 0;
                            Object.keys(salesData[2025]).forEach(branch => {
                                if (currentBranch === 'all' || branch === currentBranch) {
                                    total += salesData[2025][branch].self.monthly[i] || 0;
                                }
                            });
                            return total;
                        }),
                        borderColor: 'rgba(46, 204, 113, 1)',
                        backgroundColor: 'rgba(46, 204, 113, 0.1)',
                        tension: 0.4
                    });
                    
                    datasets.push({
                        label: '2025 Online',
                        data: months.map((_, i) => {
                            let total = 0;
                            Object.keys(salesData[2025]).forEach(branch => {
                                if (currentBranch === 'all' || branch === currentBranch) {
                                    total += salesData[2025][branch].online.monthly[i] || 0;
                                }
                            });
                            return total;
                        }),
                        borderColor: 'rgba(155, 89, 182, 1)',
                        backgroundColor: 'rgba(155, 89, 182, 0.1)',
                        tension: 0.4
                    });
                }
                
                salesTrendChart = new Chart(salesTrendCtx, {
                    type: 'line',
                    data: {
                        labels: months,
                        datasets: datasets
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Sales Trends'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }

            // Delivery vs Online Performance Chart
            const deliveryVsOnlineCtx = document.getElementById('delivery-vs-online-chart');
            if (deliveryVsOnlineCtx) {
                // Calculate total sales for delivery and online
                let totalDeliverySales = 0;
                let totalOnlineSales = 0;
                
                const years = currentYear === 'both' ? [2024, 2025] : [parseInt(currentYear)];
                
                years.forEach(year => {
                    Object.keys(salesData[year]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            totalDeliverySales += salesData[year][branch].self.sales;
                            totalOnlineSales += salesData[year][branch].online.sales;
                        }
                    });
                });
                
                deliveryVsOnlineChart = new Chart(deliveryVsOnlineCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Self-Delivery', 'Online'],
                        datasets: [
                            {
                                label: 'Sales (AED)',
                                data: [totalDeliverySales, totalOnlineSales],
                                backgroundColor: [
                                    'rgba(22, 160, 133, 0.7)',
                                    'rgba(155, 89, 182, 0.7)'
                                ],
                                borderColor: [
                                    'rgba(22, 160, 133, 1)',
                                    'rgba(155, 89, 182, 1)'
                                ],
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Delivery vs Online Performance'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }

            // Branch Contribution Chart
            const branchContributionCtx = document.getElementById('branch-contribution-chart');
            if (branchContributionCtx) {
                const branchNames = ['Hamdan St', 'Khaldia', 'Shabiya 11', 'Muroor', 'Al Electra', 'Al Barsha', 'Al Satwa', 'Al Rigga'];
                const branchSales = [];
                
                Object.keys(salesData[2025]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        branchSales.push(salesData[2025][branch].total);
                    }
                });
                
                branchContributionChart = new Chart(branchContributionCtx, {
                    type: 'doughnut',
                    data: {
                        labels: branchNames,
                        datasets: [{
                            data: branchSales,
                            backgroundColor: [
                                'rgba(52, 152, 219, 0.7)',
                                'rgba(46, 204, 113, 0.7)',
                                'rgba(243, 156, 18, 0.7)',
                                'rgba(231, 76, 60, 0.7)',
                                'rgba(149, 165, 166, 0.7)',
                                'rgba(155, 89, 182, 0.7)',
                                'rgba(26, 188, 156, 0.7)',
                                'rgba(230, 126, 34, 0.7)'
                            ],
                            borderColor: [
                                'rgba(52, 152, 219, 1)',
                                'rgba(46, 204, 113, 1)',
                                'rgba(243, 156, 18, 1)',
                                'rgba(231, 76, 60, 1)',
                                'rgba(149, 165, 166, 1)',
                                'rgba(155, 89, 182, 1)',
                                'rgba(26, 188, 156, 1)',
                                'rgba(230, 126, 34, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Branch Contribution'
                            },
                            legend: {
                                position: 'right'
                            }
                        }
                    }
                });
            }

            // Top and Bottom Performing Branches Chart
            const topBottomCtx = document.getElementById('top-bottom-branches-chart');
            if (topBottomCtx) {
                const branchNames = ['Hamdan St', 'Khaldia', 'Shabiya 11', 'Muroor', 'Al Electra', 'Al Barsha', 'Al Satwa', 'Al Rigga'];
                const branchPerformance = [];
                
                Object.keys(salesData[2025]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        // Calculate performance score (sales + orders)
                        const performance = salesData[2025][branch].total + (salesData[2025][branch].self.orders + salesData[2025][branch].online.orders) * 10;
                        branchPerformance.push(performance);
                    }
                });
                
                // Sort branches by performance
                const sortedIndices = branchPerformance
                    .map((score, index) => ({ score, index }))
                    .sort((a, b) => b.score - a.score)
                    .map(item => item.index);
                
                const sortedBranchNames = sortedIndices.map(i => branchNames[i]);
                const sortedPerformance = sortedIndices.map(i => branchPerformance[i]);
                
                topBottomBranchesChart = new Chart(topBottomCtx, {
                    type: 'bar',
                    data: {
                        labels: sortedBranchNames,
                        datasets: [{
                            label: 'Performance Score',
                            data: sortedPerformance,
                            backgroundColor: sortedPerformance.map(score => {
                                if (score > 100000) return 'rgba(46, 204, 113, 0.7)';
                                if (score > 50000) return 'rgba(52, 152, 219, 0.7)';
                                if (score > 10000) return 'rgba(243, 156, 18, 0.7)';
                                return 'rgba(231, 76, 60, 0.7)';
                            }),
                            borderColor: sortedPerformance.map(score => {
                                if (score > 100000) return 'rgba(46, 204, 113, 1)';
                                if (score > 50000) return 'rgba(52, 152, 219, 1)';
                                if (score > 10000) return 'rgba(243, 156, 18, 1)';
                                return 'rgba(231, 76, 60, 1)';
                            }),
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Top and Bottom Performing Branches'
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Performance Score'
                                }
                            }
                        }
                    }
                });
            }
        }

        // Initialize monthly performance charts
        function initializeMonthlyPerformanceCharts() {
            // Destroy existing charts if they exist
            if (monthlyDeliveryChart) monthlyDeliveryChart.destroy();
            if (monthlyChannelChart) monthlyChannelChart.destroy();
            
            // Monthly Delivery Chart
            const monthlyDeliveryCtx = document.getElementById('monthly-delivery-chart');
            if (monthlyDeliveryCtx) {
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                
                const deliveryData = months.map((_, i) => {
                    let total = 0;
                    Object.keys(salesData[2025]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            total += salesData[2025][branch].self.monthly[i] || 0;
                        }
                    });
                    return total;
                });
                
                const onlineData = months.map((_, i) => {
                    let total = 0;
                    Object.keys(salesData[2025]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            total += salesData[2025][branch].online.monthly[i] || 0;
                        }
                    });
                    return total;
                });
                
                monthlyDeliveryChart = new Chart(monthlyDeliveryCtx, {
                    type: 'bar',
                    data: {
                        labels: months,
                        datasets: [
                            {
                                label: 'Self-Delivery',
                                data: deliveryData,
                                backgroundColor: 'rgba(22, 160, 133, 0.7)',
                                borderColor: 'rgba(22, 160, 133, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'Online',
                                data: onlineData,
                                backgroundColor: 'rgba(155, 89, 182, 0.7)',
                                borderColor: 'rgba(155, 89, 182, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Monthly Sales by Delivery Type'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Monthly Channel Chart
            const monthlyChannelCtx = document.getElementById('monthly-channel-chart');
            if (monthlyChannelCtx) {
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                
                const channelData = months.map((_, i) => {
                    let total = 0;
                    Object.keys(salesData[2025]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            total += salesData[2025][branch].self.monthly[i] || 0;
                            total += salesData[2025][branch].online.monthly[i] || 0;
                        }
                    });
                    return total;
                });
                
                monthlyChannelChart = new Chart(monthlyChannelCtx, {
                    type: 'line',
                    data: {
                        labels: months,
                        datasets: [
                            {
                                label: 'Total Sales',
                                data: channelData,
                                borderColor: 'rgba(52, 152, 219, 1)',
                                backgroundColor: 'rgba(52, 152, 219, 0.1)',
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Monthly Sales by Channel'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Populate monthly performance table
            populateMonthlyPerformanceTable();
        }

        // Initialize comparisons charts
        function initializeComparisonsCharts() {
            // Destroy existing charts if they exist
            if (monthComparisonChart) monthComparisonChart.destroy();
            if (yearOverYearChart) yearOverYearChart.destroy();
            
            // Month Comparison Chart
            const monthComparisonCtx = document.getElementById('month-comparison-chart');
            if (monthComparisonCtx) {
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                
                const currentMonthData = months.map((_, i) => {
                    let total = 0;
                    Object.keys(salesData[2025]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            total += salesData[2025][branch].self.monthly[i] || 0;
                            total += salesData[2025][branch].online.monthly[i] || 0;
                        }
                    });
                    return total;
                });
                
                const prevMonthData = months.map((_, i) => {
                    let total = 0;
                    Object.keys(salesData[2025]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            // For previous month, we need to adjust the index
                            const prevIndex = i === 0 ? 11 : i - 1;
                            total += salesData[2025][branch].self.monthly[prevIndex] || 0;
                            total += salesData[2025][branch].online.monthly[prevIndex] || 0;
                        }
                    });
                    return total;
                });
                
                monthComparisonChart = new Chart(monthComparisonCtx, {
                    type: 'bar',
                    data: {
                        labels: months,
                        datasets: [
                            {
                                label: 'Current Month',
                                data: currentMonthData,
                                backgroundColor: 'rgba(52, 152, 219, 0.7)',
                                borderColor: 'rgba(52, 152, 219, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'Previous Month',
                                data: prevMonthData,
                                backgroundColor: 'rgba(46, 204, 113, 0.7)',
                                borderColor: 'rgba(46, 204, 113, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Current vs Previous Month'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Year Over Year Chart
            const yearOverYearCtx = document.getElementById('year-over-year-chart');
            if (yearOverYearCtx) {
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                
                const year2024Data = months.map((_, i) => {
                    let total = 0;
                    Object.keys(salesData[2024]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            total += salesData[2024][branch].self.monthly[i] || 0;
                            total += salesData[2024][branch].online.monthly[i] || 0;
                        }
                    });
                    return total;
                });
                
                const year2025Data = months.map((_, i) => {
                    let total = 0;
                    Object.keys(salesData[2025]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            total += salesData[2025][branch].self.monthly[i] || 0;
                            total += salesData[2025][branch].online.monthly[i] || 0;
                        }
                    });
                    return total;
                });
                
                yearOverYearChart = new Chart(yearOverYearCtx, {
                    type: 'line',
                    data: {
                        labels: months,
                        datasets: [
                            {
                                label: '2024',
                                data: year2024Data,
                                borderColor: 'rgba(231, 76, 60, 1)',
                                backgroundColor: 'rgba(231, 76, 60, 0.1)',
                                tension: 0.4
                            },
                            {
                                label: '2025',
                                data: year2025Data,
                                borderColor: 'rgba(52, 152, 219, 1)',
                                backgroundColor: 'rgba(52, 152, 219, 0.1)',
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Same Month vs Last Year'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Populate comparison tables
            populateComparisonTables();
        }

        // Initialize branch analysis charts
        function initializeBranchAnalysisCharts() {
            // Destroy existing charts if they exist
            if (branchSalesChart) branchSalesChart.destroy();
            if (branchContributionReportChart) branchContributionReportChart.destroy();
            
            // Branch Sales Chart
            const branchSalesCtx = document.getElementById('branch-sales-chart');
            if (branchSalesCtx) {
                const branchNames = ['Hamdan St', 'Khaldia', 'Shabiya 11', 'Muroor', 'Al Electra', 'Al Barsha', 'Al Satwa', 'Al Rigga'];
                const deliverySales = [];
                const onlineSales = [];
                
                Object.keys(salesData[2025]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        deliverySales.push(salesData[2025][branch].self.sales);
                        onlineSales.push(salesData[2025][branch].online.sales);
                    }
                });
                
                branchSalesChart = new Chart(branchSalesCtx, {
                    type: 'bar',
                    data: {
                        labels: branchNames,
                        datasets: [
                            {
                                label: 'Self-Delivery Sales',
                                data: deliverySales,
                                backgroundColor: 'rgba(22, 160, 133, 0.7)',
                                borderColor: 'rgba(22, 160, 133, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'Online Sales',
                                data: onlineSales,
                                backgroundColor: 'rgba(155, 89, 182, 0.7)',
                                borderColor: 'rgba(155, 89, 182, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Branch Sales Comparison'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Branch Contribution Chart
            const branchContributionReportCtx = document.getElementById('branch-contribution-report-chart');
            if (branchContributionReportCtx) {
                const branchNames = ['Hamdan St', 'Khaldia', 'Shabiya 11', 'Muroor', 'Al Electra', 'Al Barsha', 'Al Satwa', 'Al Rigga'];
                const branchSales2024 = [];
                const branchSales2025 = [];
                
                Object.keys(salesData[2025]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        branchSales2024.push(salesData[2024][branch].total || 0);
                        branchSales2025.push(salesData[2025][branch].total);
                    }
                });
                
                branchContributionReportChart = new Chart(branchContributionReportCtx, {
                    type: 'bar',
                    data: {
                        labels: branchNames,
                        datasets: [
                            {
                                label: '2024',
                                data: branchSales2024,
                                backgroundColor: 'rgba(231, 76, 60, 0.7)',
                                borderColor: 'rgba(231, 76, 60, 1)',
                                borderWidth: 1
                            },
                            {
                                label: '2025',
                                data: branchSales2025,
                                backgroundColor: 'rgba(52, 152, 219, 0.7)',
                                borderColor: 'rgba(52, 152, 219, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Branch Distribution'
                            },
                            legend: {
                                position: 'right'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Populate branch analysis tables
            populateBranchAnalysisTables();
        }

        // Initialize channel delivery charts
        function initializeChannelDeliveryCharts() {
            // Destroy existing charts if they exist
            if (selfDeliveryReportChart) selfDeliveryReportChart.destroy();
            if (thirdPartyReportChart) thirdPartyReportChart.destroy();
            if (channelComparisonReportChart) channelComparisonReportChart.destroy();
            
            // Self-Delivery Report Chart
            const selfDeliveryReportCtx = document.getElementById('self-delivery-report-chart');
            if (selfDeliveryReportCtx) {
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                
                const selfDeliveryData = months.map((_, i) => {
                    let total = 0;
                    Object.keys(salesData[2025]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            total += salesData[2025][branch].self.monthly[i] || 0;
                        }
                    });
                    return total;
                });
                
                selfDeliveryReportChart = new Chart(selfDeliveryReportCtx, {
                    type: 'line',
                    data: {
                        labels: months,
                        datasets: [
                            {
                                label: 'Self-Delivery Sales',
                                data: selfDeliveryData,
                                borderColor: 'rgba(22, 160, 133, 1)',
                                backgroundColor: 'rgba(22, 160, 133, 0.1)',
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Self-Delivery Performance'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Third-Party Report Chart
            const thirdPartyReportCtx = document.getElementById('third-party-report-chart');
            if (thirdPartyReportCtx) {
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                
                const thirdPartyData = months.map((_, i) => {
                    let total = 0;
                    Object.keys(salesData[2025]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            total += salesData[2025][branch].online.monthly[i] || 0;
                        }
                    });
                    return total;
                });
                
                thirdPartyReportChart = new Chart(thirdPartyReportCtx, {
                    type: 'line',
                    data: {
                        labels: months,
                        datasets: [
                            {
                                label: 'Third-Party Sales',
                                data: thirdPartyData,
                                borderColor: 'rgba(155, 89, 182, 1)',
                                backgroundColor: 'rgba(155, 89, 182, 0.1)',
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Third-Party Performance'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Channel Comparison Report Chart
            const channelComparisonReportCtx = document.getElementById('channel-comparison-report-chart');
            if (channelComparisonReportCtx) {
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                
                const deliveryData = months.map((_, i) => {
                    let total = 0;
                    Object.keys(salesData[2025]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            total += salesData[2025][branch].self.monthly[i] || 0;
                        }
                    });
                    return total;
                });
                
                const onlineData = months.map((_, i) => {
                    let total = 0;
                    Object.keys(salesData[2025]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            total += salesData[2025][branch].online.monthly[i] || 0;
                        }
                    });
                    return total;
                });
                
                channelComparisonReportChart = new Chart(channelComparisonReportCtx, {
                    type: 'bar',
                    data: {
                        labels: months,
                        datasets: [
                            {
                                label: 'Delivery',
                                data: deliveryData,
                                backgroundColor: 'rgba(22, 160, 133, 0.7)',
                                borderColor: 'rgba(22, 160, 133, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'Online',
                                data: onlineData,
                                backgroundColor: 'rgba(155, 89, 182, 0.7)',
                                borderColor: 'rgba(155, 89, 182, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Channel Performance Comparison'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Populate channel delivery tables
            populateChannelDeliveryTables();
        }

        // Initialize daily trends charts
        function initializeDailyTrendsCharts() {
            // Destroy existing charts if they exist
            if (dailyChart) dailyChart.destroy();
            if (weekdayWeekendChart) weekdayWeekendChart.destroy();
            if (peakHoursChart) peakHoursChart.destroy();
            
            // Daily Chart
            const dailyCtx = document.getElementById('daily-chart');
            if (dailyCtx) {
                // Generate sample daily data for demonstration
                const days = [];
                const salesData = [];
                
                // Generate last 30 days of data
                for (let i = 29; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    days.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
                    salesData.push(Math.floor(Math.random() * 10000) + 5000);
                }
                
                dailyChart = new Chart(dailyCtx, {
                    type: 'line',
                    data: {
                        labels: days,
                        datasets: [
                            {
                                label: 'Daily Sales',
                                data: salesData,
                                borderColor: 'rgba(52, 152, 219, 1)',
                                backgroundColor: 'rgba(52, 152, 219, 0.1)',
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Daily Transactions and Sales'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Weekday vs Weekend Chart
            const weekdayWeekendCtx = document.getElementById('weekday-weekend-chart');
            if (weekdayWeekendCtx) {
                const weekdays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
                const weekdayData = weekdays.map(() => Math.floor(Math.random() * 5000) + 3000);
                const weekendData = weekdays.map((_, i) => i >= 5 ? Math.floor(Math.random() * 7000) + 5000 : 0);
                
                weekdayWeekendChart = new Chart(weekdayWeekendCtx, {
                    type: 'bar',
                    data: {
                        labels: weekdays,
                        datasets: [
                            {
                                label: 'Weekday',
                                data: weekdayData,
                                backgroundColor: 'rgba(52, 152, 219, 0.7)',
                                borderColor: 'rgba(52, 152, 219, 1)',
                                borderWidth: 1
                            },
                            {
                                label: 'Weekend',
                                data: weekendData,
                                backgroundColor: 'rgba(46, 204, 113, 0.7)',
                                borderColor: 'rgba(46, 204, 113, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Weekday vs Weekend Performance'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Peak Hours Chart
            const peakHoursCtx = document.getElementById('peak-hours-chart');
            if (peakHoursCtx) {
                const hours = Array.from({ length: 24 }, (_, i) => `${i}:00`);
                const hourData = hours.map(() => Math.floor(Math.random() * 2000) + 500);
                
                // Make peak hours (12-14 and 19-21) higher
                for (let i = 12; i <= 14; i++) {
                    hourData[i] = Math.floor(Math.random() * 3000) + 3000;
                }
                for (let i = 19; i <= 21; i++) {
                    hourData[i] = Math.floor(Math.random() * 3000) + 3000;
                }
                
                peakHoursChart = new Chart(peakHoursCtx, {
                    type: 'bar',
                    data: {
                        labels: hours,
                        datasets: [
                            {
                                label: 'Sales by Hour',
                                data: hourData,
                                backgroundColor: 'rgba(243, 156, 18, 0.7)',
                                borderColor: 'rgba(243, 156, 18, 1)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Peak Hours Analysis'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Sales (AED)'
                                }
                            }
                        }
                    }
                });
            }
            
            // Populate daily analysis table
            populateDailyAnalysisTable();
        }

        // Update dashboard
        function updateDashboard() {
            // Get filter values
            currentYear = document.getElementById('yearFilter').value;
            currentBranch = document.getElementById('branchFilter').value;
            deliveryType = document.getElementById('deliveryType').value;
            reportPeriod = document.getElementById('reportPeriod').value;
            currentChannel = document.getElementById('channelFilter').value;
            comparisonMode = document.getElementById('comparisonMode').value;
            
            // Update KPIs based on filters
            updateKPIs();
            
            // Update year indicators
            updateYearIndicators();
            
            // Update charts if on executive dashboard
            if (document.getElementById('executive-dashboard').classList.contains('active')) {
                initializeExecutiveCharts();
            }
        }

        // Update KPIs
        function updateKPIs() {
            // Calculate total sales
            let totalSales = 0;
            let totalOrders = 0;
            
            if (currentYear === 'both') {
                Object.values(salesData[2024]).forEach(branch => {
                    totalSales += branch.total;
                    totalOrders += branch.self.orders + branch.online.orders;
                });
                Object.values(salesData[2025]).forEach(branch => {
                    totalSales += branch.total;
                    totalOrders += branch.self.orders + branch.online.orders;
                });
            } else {
                Object.values(salesData[currentYear]).forEach(branch => {
                    totalSales += branch.total;
                    totalOrders += branch.self.orders + branch.online.orders;
                });
            }
            
            // Calculate average order value
            const avgOrderValue = totalOrders > 0 ? totalSales / totalOrders : 0;
            
            // Calculate YoY growth
            let yoyGrowth = 0;
            if (currentYear === 'both' || comparisonMode === 'yoy') {
                const sales2024 = Object.values(salesData[2024]).reduce((sum, branch) => sum + branch.total, 0);
                const sales2025 = Object.values(salesData[2025]).reduce((sum, branch) => sum + branch.total, 0);
                yoyGrowth = sales2024 > 0 ? ((sales2025 - sales2024) / sales2024 * 100) : 0;
            }
            
            // Update KPI display
            document.getElementById('totalSales').textContent = `AED ${totalSales.toLocaleString()}`;
            document.getElementById('totalOrders').textContent = totalOrders.toLocaleString();
            document.getElementById('avgOrderValue').textContent = `AED ${avgOrderValue.toFixed(2)}`;
            document.getElementById('growthRate').textContent = `${yoyGrowth.toFixed(1)}%`;
            
            // Update KPI change indicators
            document.getElementById('salesGrowth').textContent = `${yoyGrowth >= 0 ? '+' : ''}${yoyGrowth.toFixed(1)}% YoY`;
            document.getElementById('salesGrowth').className = `kpi-change ${yoyGrowth >= 0 ? 'positive' : 'negative'}`;
            
            document.getElementById('ordersGrowth').textContent = `${yoyGrowth >= 0 ? '+' : ''}${yoyGrowth.toFixed(1)}% YoY`;
            document.getElementById('ordersGrowth').className = `kpi-change ${yoyGrowth >= 0 ? 'positive' : 'negative'}`;
            
            document.getElementById('aovGrowth').textContent = `${yoyGrowth >= 0 ? '+' : ''}${yoyGrowth.toFixed(1)}% YoY`;
            document.getElementById('aovGrowth').className = `kpi-change ${yoyGrowth >= 0 ? 'positive' : 'negative'}`;
        }

        // Populate monthly performance table
        function populateMonthlyPerformanceTable() {
            const tbody = document.getElementById('monthly-performance-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            
            months.forEach((month, i) => {
                const row = document.createElement('tr');
                
                let sales2024 = 0;
                let orders2024 = 0;
                let sales2025 = 0;
                let orders2025 = 0;
                
                Object.keys(salesData[2024]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        sales2024 += salesData[2024][branch].self.monthly[i] || 0;
                        sales2024 += salesData[2024][branch].online.monthly[i] || 0;
                        orders2024 += salesData[2024][branch].self.monthlyOrders[i] || 0;
                        orders2024 += salesData[2024][branch].online.monthlyOrders[i] || 0;
                    }
                });
                
                Object.keys(salesData[2025]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        sales2025 += salesData[2025][branch].self.monthly[i] || 0;
                        sales2025 += salesData[2025][branch].online.monthly[i] || 0;
                        orders2025 += salesData[2025][branch].self.monthlyOrders[i] || 0;
                        orders2025 += salesData[2025][branch].online.monthlyOrders[i] || 0;
                    }
                });
                
                const totalSales = sales2024 + sales2025;
                const totalOrders = orders2024 + orders2025;
                const avgOrderValue = totalOrders > 0 ? totalSales / totalOrders : 0;
                
                // Calculate YoY growth
                const yoyGrowth = sales2024 > 0 ? ((sales2025 - sales2024) / sales2024 * 100) : 0;
                
                row.innerHTML = `
                    <td>${month}</td>
                    <td>AED ${sales2024.toLocaleString()}</td>
                    <td>${orders2024.toLocaleString()}</td>
                    <td>AED ${sales2025.toLocaleString()}</td>
                    <td>${orders2025.toLocaleString()}</td>
                    <td>AED ${totalSales.toLocaleString()}</td>
                    <td>${totalOrders.toLocaleString()}</td>
                    <td>AED ${avgOrderValue.toFixed(2)}</td>
                    <td class="${yoyGrowth >= 0 ? 'trend-up' : 'trend-down'}">${yoyGrowth >= 0 ? '+' : ''}${yoyGrowth.toFixed(1)}%</td>
                `;
                
                tbody.appendChild(row);
            });
        }

        // Populate comparison tables
        function populateComparisonTables() {
            // Month-to-month comparison table
            const monthlyComparisonTbody = document.getElementById('monthly-comparison-tbody');
            if (monthlyComparisonTbody) {
                monthlyComparisonTbody.innerHTML = '';
                
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                
                months.forEach((month, i) => {
                    const row = document.createElement('tr');
                    
                    let currentSales = 0;
                    let currentOrders = 0;
                    let currentAov = 0;
                    
                    Object.keys(salesData[2025]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            currentSales += salesData[2025][branch].self.monthly[i] || 0;
                            currentSales += salesData[2025][branch].online.monthly[i] || 0;
                            currentOrders += salesData[2025][branch].self.monthlyOrders[i] || 0;
                            currentOrders += salesData[2025][branch].online.monthlyOrders[i] || 0;
                        }
                    });
                    
                    currentAov = currentOrders > 0 ? currentSales / currentOrders : 0;
                    
                    // Calculate previous month comparison
                    let prevMonthComparison = 0;
                    if (i > 0) {
                        let prevSales = 0;
                        Object.keys(salesData[2025]).forEach(branch => {
                            if (currentBranch === 'all' || branch === currentBranch) {
                                prevSales += salesData[2025][branch].self.monthly[i-1] || 0;
                                prevSales += salesData[2025][branch].online.monthly[i-1] || 0;
                            }
                        });
                        prevMonthComparison = prevSales > 0 ? ((currentSales - prevSales) / prevSales * 100) : 0;
                    }
                    
                    // Calculate same month last year comparison
                    let sameMonthComparison = 0;
                    if (i < salesData[2024][Object.keys(salesData[2024])[0]].self.monthly.length) {
                        let prevYearSales = 0;
                        Object.keys(salesData[2024]).forEach(branch => {
                            if (currentBranch === 'all' || branch === currentBranch) {
                                prevYearSales += salesData[2024][branch].self.monthly[i] || 0;
                                prevYearSales += salesData[2024][branch].online.monthly[i] || 0;
                            }
                        });
                        sameMonthComparison = prevYearSales > 0 ? ((currentSales - prevYearSales) / prevYearSales * 100) : 0;
                    }
                    
                    row.innerHTML = `
                        <td>${month}</td>
                        <td>AED ${(currentSales * 0.5).toLocaleString()}</td>
                        <td>${(currentOrders * 0.5).toLocaleString()}</td>
                        <td>AED ${currentSales.toLocaleString()}</td>
                        <td>${currentOrders.toLocaleString()}</td>
                        <td>AED ${currentAov.toFixed(2)}</td>
                        <td class="${prevMonthComparison >= 0 ? 'trend-up' : 'trend-down'}">${prevMonthComparison >= 0 ? '+' : ''}${prevMonthComparison.toFixed(1)}%</td>
                        <td class="${sameMonthComparison >= 0 ? 'trend-up' : 'trend-down'}">${sameMonthComparison >= 0 ? '+' : ''}${sameMonthComparison.toFixed(1)}%</td>
                    `;
                    
                    monthlyComparisonTbody.appendChild(row);
                });
            }
            
            // Year-over-year comparison table
            const yearOverYearTbody = document.getElementById('year-over-year-tbody');
            if (yearOverYearTbody) {
                yearOverYearTbody.innerHTML = '';
                
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                
                months.forEach((month, i) => {
                    const row = document.createElement('tr');
                    
                    let sales2024 = 0;
                    let orders2024 = 0;
                    let sales2025 = 0;
                    let orders2025 = 0;
                    
                    Object.keys(salesData[2024]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            sales2024 += salesData[2024][branch].self.monthly[i] || 0;
                            sales2024 += salesData[2024][branch].online.monthly[i] || 0;
                            orders2024 += salesData[2024][branch].self.monthlyOrders[i] || 0;
                            orders2024 += salesData[2024][branch].online.monthlyOrders[i] || 0;
                        }
                    });
                    
                    Object.keys(salesData[2025]).forEach(branch => {
                        if (currentBranch === 'all' || branch === currentBranch) {
                            sales2025 += salesData[2025][branch].self.monthly[i] || 0;
                            sales2025 += salesData[2025][branch].online.monthly[i] || 0;
                            orders2025 += salesData[2025][branch].self.monthlyOrders[i] || 0;
                            orders2025 += salesData[2025][branch].online.monthlyOrders[i] || 0;
                        }
                    });
                    
                    const salesGrowth = sales2024 > 0 ? ((sales2025 - sales2024) / sales2024 * 100) : 0;
                    const ordersGrowth = orders2024 > 0 ? ((orders2025 - orders2024) / orders2024 * 100) : 0;
                    
                    row.innerHTML = `
                        <td>${month}</td>
                        <td>AED ${sales2024.toLocaleString()}</td>
                        <td>${orders2024.toLocaleString()}</td>
                        <td>AED ${sales2025.toLocaleString()}</td>
                        <td>${orders2025.toLocaleString()}</td>
                        <td class="${salesGrowth >= 0 ? 'trend-up' : 'trend-down'}">${salesGrowth >= 0 ? '+' : ''}${salesGrowth.toFixed(1)}%</td>
                        <td class="${ordersGrowth >= 0 ? 'trend-up' : 'trend-down'}">${ordersGrowth >= 0 ? '+' : ''}${ordersGrowth.toFixed(1)}%</td>
                    `;
                    
                    yearOverYearTbody.appendChild(row);
                });
            }
        }

        // Populate branch analysis tables
        function populateBranchAnalysisTables() {
            // Branch performance table
            const branchPerformanceTbody = document.getElementById('branch-performance-tbody');
            if (branchPerformanceTbody) {
                branchPerformanceTbody.innerHTML = '';
                
                Object.keys(salesData[2025]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        const row = document.createElement('tr');
                        
                        const sales2024 = salesData[2024][branch].total || 0;
                        const orders2024 = salesData[2024][branch].self.orders + salesData[2024][branch].online.orders;
                        const sales2025 = salesData[2025][branch].total;
                        const orders2025 = salesData[2025][branch].self.orders + salesData[2025][branch].online.orders;
                        const totalSales = sales2024 + sales2025;
                        const contribution = totalSales > 0 ? (totalSales / Object.values(salesData[2025]).reduce((sum, b) => sum + b.total, 0)) * 100 : 0;
                        
                        // Calculate performance indicator
                        let performanceClass = 'poor';
                        if (contribution > 20) performanceClass = 'excellent';
                        else if (contribution > 10) performanceClass = 'good';
                        else if (contribution > 5) performanceClass = 'average';
                        
                        row.innerHTML = `
                            <td>${branch}</td>
                            <td>AED ${sales2024.toLocaleString()}</td>
                            <td>${orders2024.toLocaleString()}</td>
                            <td>AED ${sales2025.toLocaleString()}</td>
                            <td>${orders2025.toLocaleString()}</td>
                            <td>AED ${totalSales.toLocaleString()}</td>
                            <td>${contribution.toFixed(1)}%</td>
                            <td><span class="performance-indicator ${performanceClass}">${performanceClass.toUpperCase()}</span></td>
                        `;
                        
                        branchPerformanceTbody.appendChild(row);
                    }
                });
            }
            
            // Branch contribution table
            const branchContributionTbody = document.getElementById('branch-contribution-tbody');
            if (branchContributionTbody) {
                branchContributionTbody.innerHTML = '';
                
                const totalSales2024 = Object.values(salesData[2024]).reduce((sum, branch) => sum + branch.total, 0);
                const totalSales2025 = Object.values(salesData[2025]).reduce((sum, branch) => sum + branch.total, 0);
                
                Object.keys(salesData[2025]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        const row = document.createElement('tr');
                        const sales2024 = salesData[2024][branch].total || 0;
                        const sales2025 = salesData[2025][branch].total;
                        const percentage2024 = totalSales2024 > 0 ? (sales2024 / totalSales2024) * 100 : 0;
                        const percentage2025 = totalSales2025 > 0 ? (sales2025 / totalSales2025) * 100 : 0;
                        
                        row.innerHTML = `
                            <td>${branch}</td>
                            <td>AED ${sales2024.toLocaleString()}</td>
                            <td>AED ${sales2025.toLocaleString()}</td>
                            <td>${percentage2025.toFixed(1)}%</td>
                            <td>
                                <div class="contribution-bar">
                                    <div class="contribution-fill" style="width: ${percentage2025}%"></div>
                                </div>
                            </td>
                        `;
                        
                        branchContributionTbody.appendChild(row);
                    }
                });
            }
        }

        // Populate channel delivery tables
        function populateChannelDeliveryTables() {
            // Delivery type comparison table
            const deliveryTypeTbody = document.getElementById('delivery-type-tbody');
            if (deliveryTypeTbody) {
                deliveryTypeTbody.innerHTML = '';
                
                // Self-delivery data
                let selfSales2024 = 0;
                let selfOrders2024 = 0;
                let selfSales2025 = 0;
                let selfOrders2025 = 0;
                
                Object.keys(salesData[2024]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        selfSales2024 += salesData[2024][branch].self.sales;
                        selfOrders2024 += salesData[2024][branch].self.orders;
                    }
                });
                
                Object.keys(salesData[2025]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        selfSales2025 += salesData[2025][branch].self.sales;
                        selfOrders2025 += salesData[2025][branch].self.orders;
                    }
                });
                
                const selfSalesGrowth = selfSales2024 > 0 ? ((selfSales2025 - selfSales2024) / selfSales2024 * 100) : 0;
                const selfOrdersGrowth = selfOrders2024 > 0 ? ((selfOrders2025 - selfOrders2024) / selfOrders2024 * 100) : 0;
                
                const selfRow = document.createElement('tr');
                selfRow.innerHTML = `
                    <td>Self-Delivery</td>
                    <td>AED ${selfSales2024.toLocaleString()}</td>
                    <td>${selfOrders2024.toLocaleString()}</td>
                    <td>AED ${selfSales2025.toLocaleString()}</td>
                    <td>${selfOrders2025.toLocaleString()}</td>
                    <td class="${selfSalesGrowth >= 0 ? 'trend-up' : 'trend-down'}">${selfSalesGrowth >= 0 ? '+' : ''}${selfSalesGrowth.toFixed(1)}%</td>
                    <td class="${selfOrdersGrowth >= 0 ? 'trend-up' : 'trend-down'}">${selfOrdersGrowth >= 0 ? '+' : ''}${selfOrdersGrowth.toFixed(1)}%</td>
                `;
                deliveryTypeTbody.appendChild(selfRow);
                
                // Online data
                let onlineSales2024 = 0;
                let onlineOrders2024 = 0;
                let onlineSales2025 = 0;
                let onlineOrders2025 = 0;
                
                Object.keys(salesData[2024]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        onlineSales2024 += salesData[2024][branch].online.sales;
                        onlineOrders2024 += salesData[2024][branch].online.orders;
                    }
                });
                
                Object.keys(salesData[2025]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        onlineSales2025 += salesData[2025][branch].online.sales;
                        onlineOrders2025 += salesData[2025][branch].online.orders;
                    }
                });
                
                const onlineSalesGrowth = onlineSales2024 > 0 ? ((onlineSales2025 - onlineSales2024) / onlineSales2024 * 100) : 0;
                const onlineOrdersGrowth = onlineOrders2024 > 0 ? ((onlineOrders2025 - onlineOrders2024) / onlineOrders2024 * 100) : 0;
                
                const onlineRow = document.createElement('tr');
                onlineRow.innerHTML = `
                    <td>Third-Party</td>
                    <td>AED ${onlineSales2024.toLocaleString()}</td>
                    <td>${onlineOrders2024.toLocaleString()}</td>
                    <td>AED ${onlineSales2025.toLocaleString()}</td>
                    <td>${onlineOrders2025.toLocaleString()}</td>
                    <td class="${onlineSalesGrowth >= 0 ? 'trend-up' : 'trend-down'}">${onlineSalesGrowth >= 0 ? '+' : ''}${onlineSalesGrowth.toFixed(1)}%</td>
                    <td class="${onlineOrdersGrowth >= 0 ? 'trend-up' : 'trend-down'}">${onlineOrdersGrowth >= 0 ? '+' : ''}${onlineOrdersGrowth.toFixed(1)}%</td>
                `;
                deliveryTypeTbody.appendChild(onlineRow);
            }
            
            // Channel performance table
            const channelPerformanceTbody = document.getElementById('channel-performance-tbody');
            if (channelPerformanceTbody) {
                channelPerformanceTbody.innerHTML = '';
                
                // Delivery channel data
                let deliverySales2024 = 0;
                let deliveryOrders2024 = 0;
                let deliverySales2025 = 0;
                let deliveryOrders2025 = 0;
                
                Object.keys(salesData[2024]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        deliverySales2024 += salesData[2024][branch].self.sales;
                        deliveryOrders2024 += salesData[2024][branch].self.orders;
                    }
                });
                
                Object.keys(salesData[2025]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        deliverySales2025 += salesData[2025][branch].self.sales;
                        deliveryOrders2025 += salesData[2025][branch].self.orders;
                    }
                });
                
                const deliveryTotal2024 = deliverySales2024 + deliverySales2024;
                const deliveryTotal2025 = deliverySales2025 + deliverySales2025;
                const deliveryContribution = deliveryTotal2025 > 0 ? (deliveryTotal2025 / (deliveryTotal2025 + deliveryTotal2025)) * 100 : 0;
                const deliveryGrowth = deliverySales2024 > 0 ? ((deliverySales2025 - deliverySales2024) / deliverySales2024 * 100) : 0;
                
                const deliveryRow = document.createElement('tr');
                deliveryRow.innerHTML = `
                    <td>Delivery</td>
                    <td>AED ${deliverySales2024.toLocaleString()}</td>
                    <td>${deliveryOrders2024.toLocaleString()}</td>
                    <td>AED ${deliverySales2025.toLocaleString()}</td>
                    <td>${deliveryOrders2025.toLocaleString()}</td>
                    <td>${deliveryContribution.toFixed(1)}%</td>
                    <td class="${deliveryGrowth >= 0 ? 'trend-up' : 'trend-down'}">${deliveryGrowth >= 0 ? '+' : ''}${deliveryGrowth.toFixed(1)}%</td>
                `;
                channelPerformanceTbody.appendChild(deliveryRow);
                
                // Online channel data
                let onlineChannelSales2024 = 0;
                let onlineChannelOrders2024 = 0;
                let onlineChannelSales2025 = 0;
                let onlineChannelOrders2025 = 0;
                
                Object.keys(salesData[2024]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        onlineChannelSales2024 += salesData[2024][branch].online.sales;
                        onlineChannelOrders2024 += salesData[2024][branch].online.orders;
                    }
                });
                
                Object.keys(salesData[2025]).forEach(branch => {
                    if (currentBranch === 'all' || branch === currentBranch) {
                        onlineChannelSales2025 += salesData[2025][branch].online.sales;
                        onlineChannelOrders2025 += salesData[2025][branch].online.orders;
                    }
                });
                
                const onlineTotal2024 = onlineChannelSales2024 + onlineChannelSales2024;
                const onlineTotal2025 = onlineChannelSales2025 + onlineChannelSales2025;
                const onlineContribution = onlineTotal2025 > 0 ? (onlineTotal2025 / (onlineTotal2025 + onlineTotal2025)) * 100 : 0;
                const onlineGrowth = onlineChannelSales2024 > 0 ? ((onlineChannelSales2025 - onlineChannelSales2024) / onlineChannelSales2024 * 100) : 0;
                
                const onlineRow = document.createElement('tr');
                onlineRow.innerHTML = `
                    <td>Online</td>
                    <td>AED ${onlineChannelSales2024.toLocaleString()}</td>
                    <td>${onlineChannelOrders2024.toLocaleString()}</td>
                    <td>AED ${onlineChannelSales2025.toLocaleString()}</td>
                    <td>${onlineChannelOrders2025.toLocaleString()}</td>
                    <td>${onlineContribution.toFixed(1)}%</td>
                    <td class="${onlineGrowth >= 0 ? 'trend-up' : 'trend-down'}">${onlineGrowth >= 0 ? '+' : ''}${onlineGrowth.toFixed(1)}%</td>
                `;
                channelPerformanceTbody.appendChild(onlineRow);
            }
        }

        // Populate daily analysis table
        function populateDailyAnalysisTable() {
            const tbody = document.getElementById('daily-analysis-tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // Generate sample daily data for demonstration
            const today = new Date();
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                
                const row = document.createElement('tr');
                
                // Generate random data
                const deliverySales = Math.floor(Math.random() * 10000) + 5000;
                const onlineSales = Math.floor(Math.random() * 5000) + 2000;
                const deliveryOrders = Math.floor(deliverySales / 80);
                const onlineOrders = Math.floor(onlineSales / 60);
                
                row.innerHTML = `
                    <td>${date.toLocaleDateString()}</td>
                    <td>${currentBranch === 'all' ? 'All Branches' : currentBranch}</td>
                    <td>AED ${deliverySales.toLocaleString()}</td>
                    <td>AED ${onlineSales.toLocaleString()}</td>
                    <td>AED ${(deliverySales + onlineSales).toLocaleString()}</td>
                    <td>${deliveryOrders.toLocaleString()}</td>
                    <td>${onlineOrders.toLocaleString()}</td>
                    <td>${(deliveryOrders + onlineOrders).toLocaleString()}</td>
                    <td>AED ${((deliverySales + onlineSales) / (deliveryOrders + onlineOrders)).toFixed(2)}</td>
                `;
                
                tbody.appendChild(row);
            }
        }

        // Add operational note
        function addNote() {
            const branch = document.getElementById('note-branch').value;
            const content = document.getElementById('note-content').value;
            
            if (!branch || !content) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            const note = {
                id: Date.now(),
                branch: branch,
                content: content,
                date: new Date().toISOString().split('T')[0],
                author: 'Management'
            };
            
            operationalNotes.unshift(note);
            localStorage.setItem('operationalNotes', JSON.stringify(operationalNotes));
            
            // Clear form
            document.getElementById('note-branch').value = 'all';
            document.getElementById('note-content').value = '';
            
            // Refresh notes display
            displayNotes();
            
            showNotification('Note added successfully', 'success');
        }

        // Display operational notes
        function displayNotes() {
            const container = document.getElementById('notes-list');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (operationalNotes.length === 0) {
                container.innerHTML = '<p class="text-muted">No operational notes yet.</p>';
                return;
            }
            
            operationalNotes.forEach(note => {
                const noteElement = document.createElement('div');
                noteElement.className = 'note-item';
                noteElement.innerHTML = `
                    <div class="note-header">
                        <span class="note-author">${note.author}</span>
                        <span class="note-date">${note.date}</span>
                    </div>
                    <div class="note-content">
                        <strong>Branch:</strong> ${note.branch === 'all' ? 'All Branches' : note.branch}<br>
                        ${note.content}
                    </div>
                `;
                container.appendChild(noteElement);
            });
        }

        // Generate daily report
        function generateDailyReport() {
            showNotification('Daily report generated', 'info');
            
            // Implementation for daily report generation
            // This would populate the daily charts and tables with data for the selected date range
        }

        // Export functions
        function exportData(format) {
            showNotification(`Exporting data as ${format.toUpperCase()}...`, 'info');
            
            // Implementation for export functionality
            // For brevity, we'll just show a notification
        }

        // Reset form
        function resetForm() {
            document.getElementById('data-entry-form').reset();
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const messageElement = document.getElementById('notification-message');
            
            messageElement.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
